<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å—É –¥–æ –ª—ñ–∫–∞—Ä—è - –∑—Ä—É—á–Ω–∏–π –æ–Ω–ª–∞–π–Ω —Å–µ—Ä–≤—ñ—Å –¥–ª—è –∑–∞–ø–∏—Å—É –Ω–∞ –ø—Ä–∏–π–æ–º" />
    <title>–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å—É –¥–æ –ª—ñ–∫–∞—Ä—è</title>
    <base href="/" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="HospitalAppointmentSystem.Client.styles.css" rel="stylesheet" />
</head>
<body>
<div id="app">
    <div style="position:absolute; top:30vh; width:100%; text-align:center">
        <h1>–°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–∏—Å—É –¥–æ –ª—ñ–∫–∞—Ä—è</h1>
        <div style="display:flex; gap:10px; justify-content:center; align-items:center">
            <div class="spinner-border" role="status"></div>
            <span id="loading-status">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span>
        </div>
    </div>
</div>

<div id="blazor-error-ui">
    –í–∏–Ω–∏–∫–ª–∞ –Ω–µ–æ–ø—Ä–∞—Ü—å–æ–≤–∞–Ω–∞ –ø–æ–º–∏–ª–∫–∞.
    <a href="" class="reload">–ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏</a>
    <a class="dismiss">üóô</a>
</div>

<script>
    window.addEventListener('load', function() {
        var loadingStatus = document.getElementById('loading-status');
        var errorUI = document.getElementById('blazor-error-ui');

        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ WebAssembly
        if (!window.WebAssembly) {
            loadingStatus.textContent = '–ü–æ–º–∏–ª–∫–∞: –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î WebAssembly';
            return;
        }

        // –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è Blazor
        if (window._blazorInitialized) {
            loadingStatus.textContent = '–ü–æ–º–∏–ª–∫–∞: –î–æ–¥–∞—Ç–æ–∫ –≤–∂–µ –∑–∞–ø—É—â–µ–Ω–æ';
            return;
        }

        window._blazorInitialized = true;

        // –î–æ–¥–∞—î–º–æ —Ç–∞–π–º–∞—É—Ç –¥–ª—è –≤–∏—è–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
        var loadTimeout = setTimeout(function() {
            loadingStatus.textContent = '–ü–æ–º–∏–ª–∫–∞: –ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è';
        }, 30000); // 30 —Å–µ–∫—É–Ω–¥

        // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–º–∏–ª–æ–∫
        window.onerror = function(msg, url, line, col, error) {
            clearTimeout(loadTimeout);
            loadingStatus.textContent = `–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É`;
            errorUI.style.display = 'block';
            console.error('–î–µ—Ç–∞–ª—ñ –ø–æ–º–∏–ª–∫–∏:', {msg, url, line, col, error});
            return false;
        };

        // –î–æ–¥–∞—î–º–æ –æ–±—Ä–æ–±–Ω–∏–∫ –¥–ª—è –Ω–µ–∑–∞—Ö–æ–ø–ª–µ–Ω–∏—Ö promise rejection
        window.onunhandledrejection = function(event) {
            console.error('–ù–µ–∑–∞—Ö–æ–ø–ª–µ–Ω–∞ –ø–æ–º–∏–ª–∫–∞ Promise:', event.reason);
        };
    });

    // –î–æ–¥–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –≤—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ Blazor
    window.blazorProgress = {
        setProgress: function(percentage) {
            var loadingStatus = document.getElementById('loading-status');
            if (loadingStatus) {
                loadingStatus.textContent = `–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è... ${Math.round(percentage)}%`;
            }
        }
    };
</script>

<script src="_framework/blazor.webassembly.js" autostart="false"></script>
<script>
    Blazor.start({
        loadBootResource: function (type, name, defaultUri, integrity) {
            if (type !== 'dotnetjs' && type !== 'configuration' && type !== 'manifest') {
                return (async function () {
                    const response = await fetch(defaultUri, {
                        cache: 'no-cache',
                        integrity: integrity,
                        headers: { 'blazor-environment': 'Development' }
                    });
                    if (!response.ok) {
                        throw new Error(`Failed to load ${name} (${defaultUri})`);
                    }
                    return response;
                })();
            }
        }
    }).catch(function(err) {
        document.getElementById('loading-status').textContent = '–ü–æ–º–∏–ª–∫–∞ –∑–∞–ø—É—Å–∫—É –¥–æ–¥–∞—Ç–∫—É';
        console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–ø—É—Å–∫—É Blazor:', err);
    });
</script>
</body>
</html>